/**
 * WHITEBOARD IMPLEMENTATION REFERENCE
 *
 * This file provides reference implementations for whiteboard components
 * with full accessibility support and internationalization.
 *
 * DO NOT IMPORT THIS FILE - It's for reference only.
 * Copy and adapt patterns to your actual component files.
 */

import { useTranslations } from 'next-intl';
import { useState } from 'react';
import {
  Pencil,
  Square,
  Type,
  Eraser,
  ZoomIn,
  ZoomOut,
  Maximize,
  Grid,
  Trash2,
  Download,
  Presentation,
} from 'lucide-react';
import {
  Tooltip,
  TooltipContent,
  TooltipTrigger,
} from '@/components/ui/tooltip';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogTitle,
} from '@/components/ui/alert-dialog';
import { cn } from '@/lib/utils';

// ============================================================================
// EXAMPLE 1: Accessible Tool Button with Translations
// ============================================================================

interface ToolButtonProps {
  tool: 'draw' | 'shapes' | 'text' | 'eraser';
  isActive: boolean;
  onClick: () => void;
  disabled?: boolean;
}

function AccessibleToolButton({ tool, isActive, onClick, disabled }: ToolButtonProps) {
  const t = useTranslations('whiteboard');

  const icons = {
    draw: Pencil,
    shapes: Square,
    text: Type,
    eraser: Eraser,
  };

  const Icon = icons[tool];

  return (
    <Tooltip>
      <TooltipTrigger asChild>
        <button
          // Accessibility: ARIA labels
          aria-label={t(tool)}
          aria-pressed={isActive}
          title={t(tool)}
          disabled={disabled}
          onClick={onClick}
          // Accessibility: Focus management
          className={cn(
            'p-2 rounded-md transition-colors',
            'focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2',
            isActive
              ? 'bg-primary text-primary-foreground'
              : 'hover:bg-accent hover:text-accent-foreground',
            disabled && 'opacity-50 cursor-not-allowed'
          )}
        >
          {/* Accessibility: Hide icon from screen readers */}
          <Icon aria-hidden="true" size={20} />
        </button>
      </TooltipTrigger>
      <TooltipContent>{t(tool)}</TooltipContent>
    </Tooltip>
  );
}

// ============================================================================
// EXAMPLE 2: Whiteboard Toolbar Component
// ============================================================================

type Tool = 'draw' | 'shapes' | 'text' | 'eraser';

interface WhiteboardToolbarProps {
  activeTool: Tool;
  onToolChange: (tool: Tool) => void;
}

function WhiteboardToolbar({ activeTool, onToolChange }: WhiteboardToolbarProps) {
  const t = useTranslations('whiteboard');

  const tools: Tool[] = ['draw', 'shapes', 'text', 'eraser'];

  return (
    <div
      role="toolbar"
      aria-label={t('whiteboard')}
      // Accessibility: Arrow key navigation within toolbar
      className="flex items-center gap-1 p-2 bg-background border rounded-md"
    >
      {tools.map((tool) => (
        <AccessibleToolButton
          key={tool}
          tool={tool}
          isActive={activeTool === tool}
          onClick={() => onToolChange(tool)}
        />
      ))}
    </div>
  );
}

// ============================================================================
// EXAMPLE 3: Zoom Controls with Live Regions
// ============================================================================

interface ZoomControlsProps {
  zoomLevel: number;
  onZoomIn: () => void;
  onZoomOut: () => void;
  onResetZoom: () => void;
  minZoom?: number;
  maxZoom?: number;
}

function ZoomControls({
  zoomLevel,
  onZoomIn,
  onZoomOut,
  onResetZoom,
  minZoom = 50,
  maxZoom = 200,
}: ZoomControlsProps) {
  const t = useTranslations('whiteboard');
  const [announcement, setAnnouncement] = useState('');

  const handleZoomIn = () => {
    onZoomIn();
    setAnnouncement(`Zoom level ${Math.min(zoomLevel + 10, maxZoom)}%`);
  };

  const handleZoomOut = () => {
    onZoomOut();
    setAnnouncement(`Zoom level ${Math.max(zoomLevel - 10, minZoom)}%`);
  };

  const handleResetZoom = () => {
    onResetZoom();
    setAnnouncement('Zoom level reset to 100%');
  };

  return (
    <>
      {/* Accessibility: Live region for screen reader announcements */}
      <div aria-live="polite" aria-atomic="true" className="sr-only">
        {announcement}
      </div>

      <div className="flex items-center gap-1">
        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('zoomOut')}
              title={t('zoomOut')}
              disabled={zoomLevel <= minZoom}
              onClick={handleZoomOut}
              className={cn(
                'p-2 rounded-md transition-colors',
                'focus:outline-none focus:ring-2 focus:ring-primary',
                'hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed'
              )}
            >
              <ZoomOut aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('zoomOut')}</TooltipContent>
        </Tooltip>

        <span className="px-2 text-sm font-medium min-w-[4rem] text-center">
          {zoomLevel}%
        </span>

        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('zoomIn')}
              title={t('zoomIn')}
              disabled={zoomLevel >= maxZoom}
              onClick={handleZoomIn}
              className={cn(
                'p-2 rounded-md transition-colors',
                'focus:outline-none focus:ring-2 focus:ring-primary',
                'hover:bg-accent disabled:opacity-50 disabled:cursor-not-allowed'
              )}
            >
              <ZoomIn aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('zoomIn')}</TooltipContent>
        </Tooltip>

        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('resetZoom')}
              title={t('resetZoom')}
              onClick={handleResetZoom}
              className={cn(
                'p-2 rounded-md transition-colors',
                'focus:outline-none focus:ring-2 focus:ring-primary',
                'hover:bg-accent'
              )}
            >
              <Maximize aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('resetZoom')}</TooltipContent>
        </Tooltip>
      </div>
    </>
  );
}

// ============================================================================
// EXAMPLE 4: Clear Whiteboard Confirmation Dialog
// ============================================================================

interface ClearConfirmDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  onConfirm: () => void;
}

function ClearConfirmDialog({ open, onOpenChange, onConfirm }: ClearConfirmDialogProps) {
  const t = useTranslations('whiteboard');

  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent
        // Accessibility: Dialog role and labeling
        role="alertdialog"
        aria-labelledby="clear-title"
        aria-describedby="clear-description"
      >
        <AlertDialogTitle id="clear-title">
          {t('clearWhiteboard')}
        </AlertDialogTitle>
        <AlertDialogDescription id="clear-description">
          {t('clearConfirm')}
        </AlertDialogDescription>
        <div className="flex justify-end gap-2">
          <AlertDialogCancel aria-label="Cancel clear whiteboard">
            Cancel
          </AlertDialogCancel>
          <AlertDialogAction
            aria-label="Confirm clear whiteboard"
            onClick={onConfirm}
          >
            Confirm
          </AlertDialogAction>
        </div>
      </AlertDialogContent>
    </AlertDialog>
  );
}

// ============================================================================
// EXAMPLE 5: Complete Whiteboard Controls Panel
// ============================================================================

interface WhiteboardControlsProps {
  isOpen: boolean;
  gridVisible: boolean;
  zoomLevel: number;
  onToggle: () => void;
  onClear: () => void;
  onToggleGrid: () => void;
  onZoomIn: () => void;
  onZoomOut: () => void;
  onResetZoom: () => void;
  onDownloadPNG: () => void;
  onDownloadSVG: () => void;
}

function WhiteboardControls({
  isOpen,
  gridVisible,
  zoomLevel,
  onToggle,
  onClear,
  onToggleGrid,
  onZoomIn,
  onZoomOut,
  onResetZoom,
  onDownloadPNG,
  onDownloadSVG,
}: WhiteboardControlsProps) {
  const t = useTranslations('whiteboard');
  const [clearDialogOpen, setClearDialogOpen] = useState(false);
  const [announcement, setAnnouncement] = useState('');

  const handleClear = () => {
    setClearDialogOpen(true);
  };

  const confirmClear = () => {
    onClear();
    setClearDialogOpen(false);
    setAnnouncement('Whiteboard cleared');
  };

  const handleToggleGrid = () => {
    onToggleGrid();
    setAnnouncement(gridVisible ? 'Grid hidden' : 'Grid visible');
  };

  return (
    <>
      {/* Accessibility: Live region for announcements */}
      <div aria-live="polite" aria-atomic="true" className="sr-only">
        {announcement}
      </div>

      <div className="flex items-center gap-2 p-2 bg-background border rounded-md">
        {/* Toggle whiteboard */}
        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('toggleWhiteboard')}
              aria-expanded={isOpen}
              title={t('toggleWhiteboard')}
              onClick={onToggle}
              className="p-2 rounded-md transition-colors hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary"
            >
              <Presentation aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('toggleWhiteboard')}</TooltipContent>
        </Tooltip>

        <div className="w-px h-6 bg-border" />

        {/* Zoom controls */}
        <ZoomControls
          zoomLevel={zoomLevel}
          onZoomIn={onZoomIn}
          onZoomOut={onZoomOut}
          onResetZoom={onResetZoom}
        />

        <div className="w-px h-6 bg-border" />

        {/* Grid toggle */}
        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('toggleGrid')}
              aria-pressed={gridVisible}
              title={t('toggleGrid')}
              onClick={handleToggleGrid}
              className={cn(
                'p-2 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-primary',
                gridVisible ? 'bg-accent' : 'hover:bg-accent'
              )}
            >
              <Grid aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('toggleGrid')}</TooltipContent>
        </Tooltip>

        <div className="w-px h-6 bg-border" />

        {/* Clear button */}
        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('clearWhiteboard')}
              title={t('clearWhiteboard')}
              onClick={handleClear}
              className="p-2 rounded-md transition-colors hover:bg-destructive hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-destructive"
            >
              <Trash2 aria-hidden="true" size={20} />
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('clearWhiteboard')}</TooltipContent>
        </Tooltip>

        <div className="w-px h-6 bg-border" />

        {/* Download buttons */}
        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('downloadPNG')}
              title={t('downloadPNG')}
              onClick={onDownloadPNG}
              className="flex items-center gap-1 px-3 py-2 rounded-md transition-colors hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary"
            >
              <Download aria-hidden="true" size={16} />
              <span className="text-sm">PNG</span>
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('downloadPNG')}</TooltipContent>
        </Tooltip>

        <Tooltip>
          <TooltipTrigger asChild>
            <button
              aria-label={t('downloadSVG')}
              title={t('downloadSVG')}
              onClick={onDownloadSVG}
              className="flex items-center gap-1 px-3 py-2 rounded-md transition-colors hover:bg-accent focus:outline-none focus:ring-2 focus:ring-primary"
            >
              <Download aria-hidden="true" size={16} />
              <span className="text-sm">SVG</span>
            </button>
          </TooltipTrigger>
          <TooltipContent>{t('downloadSVG')}</TooltipContent>
        </Tooltip>
      </div>

      {/* Clear confirmation dialog */}
      <ClearConfirmDialog
        open={clearDialogOpen}
        onOpenChange={setClearDialogOpen}
        onConfirm={confirmClear}
      />
    </>
  );
}

// ============================================================================
// EXAMPLE 6: Whiteboard Canvas with Keyboard Navigation
// ============================================================================

interface WhiteboardCanvasProps {
  width: number;
  height: number;
  activeTool: Tool;
}

function WhiteboardCanvas({ width, height, activeTool }: WhiteboardCanvasProps) {
  const t = useTranslations('whiteboard');
  const canvasRef = useState<HTMLCanvasElement | null>(null);
  const [announcement, setAnnouncement] = useState('');

  const handleKeyDown = (e: React.KeyboardEvent) => {
    // Accessibility: Keyboard navigation
    switch (e.key) {
      case 'Escape':
        // Exit drawing mode
        setAnnouncement('Drawing mode exited');
        break;
      case ' ':
        // Toggle drawing
        setAnnouncement('Drawing toggled');
        e.preventDefault();
        break;
      case 'ArrowUp':
      case 'ArrowDown':
      case 'ArrowLeft':
      case 'ArrowRight':
        // Navigate canvas
        e.preventDefault();
        break;
    }
  };

  const handleToolChange = (newTool: Tool) => {
    setAnnouncement(`${t(newTool)} tool selected`);
  };

  return (
    <>
      {/* Accessibility: Live region */}
      <div aria-live="polite" aria-atomic="true" className="sr-only">
        {announcement}
      </div>

      {/* Accessibility: Instructions for screen readers */}
      <div id="whiteboard-instructions" className="sr-only">
        {t('whiteboard')}. Use arrow keys to navigate, space to toggle drawing,
        escape to exit drawing mode.
      </div>

      <canvas
        ref={canvasRef}
        width={width}
        height={height}
        // Accessibility: Canvas labeling
        role="img"
        aria-label={t('whiteboard')}
        aria-describedby="whiteboard-instructions"
        // Accessibility: Keyboard support
        tabIndex={0}
        onKeyDown={handleKeyDown}
        className="border rounded-md focus:outline-none focus:ring-2 focus:ring-primary"
      />
    </>
  );
}

// ============================================================================
// KEY ACCESSIBILITY PATTERNS TO FOLLOW
// ============================================================================

/**
 * 1. ARIA LABELS
 *    - Use aria-label for buttons without visible text
 *    - Use aria-pressed for toggle buttons
 *    - Use aria-expanded for expandable sections
 *    - Use aria-describedby for additional context
 *
 * 2. FOCUS MANAGEMENT
 *    - Always provide visible focus indicators
 *    - Use focus:ring-2 and focus:ring-primary
 *    - Manage focus on dialogs and modals
 *    - Return focus when closing modals
 *
 * 3. KEYBOARD NAVIGATION
 *    - Tab: Navigate between controls
 *    - Enter/Space: Activate buttons
 *    - Escape: Close modals/exit modes
 *    - Arrow keys: Navigate within toolbars/groups
 *
 * 4. SCREEN READER SUPPORT
 *    - Use live regions (aria-live) for announcements
 *    - Hide decorative icons (aria-hidden="true")
 *    - Provide text alternatives for visual content
 *    - Use semantic HTML (button, role="toolbar", etc.)
 *
 * 5. TOOLTIPS
 *    - Provide tooltips for all icon buttons
 *    - Ensure tooltips work with keyboard
 *    - Keep tooltip text concise
 *
 * 6. COLOR CONTRAST
 *    - Ensure 4.5:1 contrast ratio minimum
 *    - Don't rely on color alone to convey information
 *    - Test with color blindness simulators
 *
 * 7. TOUCH TARGETS
 *    - Minimum 44x44px for touch devices
 *    - Adequate spacing between interactive elements
 *
 * 8. INTERNATIONALIZATION
 *    - Always use t() from useTranslations
 *    - Use correct translation namespace
 *    - Test with all supported languages
 */

export {};
